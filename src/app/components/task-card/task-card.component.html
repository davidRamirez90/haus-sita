<article class="card" [class.needs-attention]="needsAttention()">
  <span class="priority-strip" [style.backgroundColor]="priorityColor()"></span>
  <div class="content">
    <div class="title-row">
      <div class="title">{{ task().title }}</div>
      @if (!isUnassigned()) {
        <span class="owner-dot" [style.backgroundColor]="ownerColor()" title="Zuständig"></span>
      }
      @if (isUnassigned()) {
        <span class="owner-label">Unassigned</span>
      }
    </div>
    <div class="meta-row">
      <span class="meta">{{ effortLabel() }}</span>
      @if (task().due_date) {
        <span class="meta">Fällig {{ task().due_date }}</span>
      }
      @if (task().planned_date && task().time_mode === 'fixed') {
        <span class="meta">Geplant {{ task().planned_date }}</span>
      }
    </div>
    @if (priorityBadges().length) {
      <div class="priority-row">
        @for (item of priorityBadges(); track item.id) {
          <span class="priority-chip">
            <span class="priority-dot" [style.backgroundColor]="item.priorityColor"></span>
            <span class="priority-name" [style.color]="item.userColor">{{ item.name }}</span>
          </span>
        }
      </div>
    }

    @if (attentionChips().length) {
      <div class="attention-row" aria-label="Fehlende Angaben">
        @for (chip of attentionChips(); track chip.label) {
          <span class="attention-chip">
            <span aria-hidden="true">{{ chip.icon }}</span>
            <span class="chip-label">{{ chip.label }}</span>
          </span>
        }
      </div>
    }
  </div>
</article>
